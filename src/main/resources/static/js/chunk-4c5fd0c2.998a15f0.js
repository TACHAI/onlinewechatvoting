(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c5fd0c2"],{"3ae1":function(t,e,a){},"4e9a":function(t,e,a){},"502c":function(t,e,a){"use strict";var r=a("6490"),i=a.n(r);i.a},6490:function(t,e,a){},"75e1":function(t,e,a){"use strict";a.r(e);var render=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-page"},[t.firstLoading||t.hasError?t._e():a("div",[a("top",{attrs:{height:"1.63rem",topBgImage:t.topBgImage,styler:{fontSize:"0.46rem",color:"#ffffff",paddingTop:"0.32rem",textAlign:"center"}}}),a("div",{staticClass:"info"},[a("custom-title",{attrs:{title:t.info.name,"created-time":t.info.activityTime}}),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.info.content)}})],1),t.workList.length>0?a("div",{staticClass:"content"},[a("work-list",{attrs:{"work-list":t.workList}}),a("div",{staticClass:"vote-list"},[a("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.workList,(function(e){return a("div",{key:e.id},[a("div",{staticClass:"list-item"},[a("van-radio",{attrs:{name:e.id,shape:"square"}}),a("strong",{staticClass:"title"},[t._v(t._s(e.name))]),a("span",{staticClass:"count"},[t._v(t._s(e.votes||0)+"票")])],1),a("van-divider")],1)})),0)],1),a("van-button",{staticStyle:{width:"6rem",margin:"0 auto"},attrs:{loading:t.loading,round:"","loading-text":"正在投票",block:"",color:"linear-gradient(to bottom, #6e9bff, #547cfe)"},on:{click:t.handleClickVote}},[t._v("投票")])],1):a("van-empty",{attrs:{description:"暂无作品！"}})],1),t.hasError?a("van-empty",{attrs:{image:"network"},scopedSlots:t._u([{key:"default",fn:function(){return[a("span",{staticClass:"not_rem_hasError",on:{click:t.getData}},[t._v("加载出错，点击重试！")])]},proxy:!0}],null,!1,3868011564)}):t._e()],1)},r=[],i=(a("99af"),a("a9e3"),a("96cf"),a("1da1")),n=a("d4ec"),s=a("bee2"),o=a("262e"),c=a("2caf"),u=a("9ab4"),l=a("60a3"),d=a("9df3"),p=a("c004"),b=a.n(p),h=a("b330"),f=a("a345"),v=a("efa5"),m=a("7122"),g=a("4bb5"),k=a("d39b"),O=a("67bd"),j=a("93f3"),y=a("ea9b"),w=Object(g["b"])("user"),_=function(t){Object(o["a"])(ManagerList,t);var e=Object(c["a"])(ManagerList);function ManagerList(){var t;return Object(n["a"])(this,ManagerList),t=e.apply(this,arguments),t.topBgImage=b.a,t.radio=null,t.info={title:"",description:"",createdTime:""},t.hasError=!1,t.workList=[],t.firstLoading=!0,t.loading=!1,t}return Object(s["a"])(ManagerList,[{key:"getData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function _callee(){var t,e,a,r;return regeneratorRuntime.wrap((function _callee$(i){while(1)switch(i.prev=i.next){case 0:return t=this.$toast.loading({duration:0,message:"正在加载"}),e=Number(this.$route.params.id),i.prev=2,i.next=5,Object(v["a"])(e);case 5:return a=i.sent,i.next=8,Object(m["d"])(e);case 8:r=i.sent,this.info=a.data,this.workList=r||[],this.hasError=!1,i.next=17;break;case 14:i.prev=14,i.t0=i["catch"](2),this.hasError=!0;case 17:return i.prev=17,this.firstLoading=!1,i.finish(17);case 20:t.clear();case 21:case"end":return i.stop()}}),_callee,this,[[2,14,17,20]])})));function getData(){return t.apply(this,arguments)}return getData}()},{key:"handleClickVote",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function _callee2(){var t,e,a,r,i,n,s;return regeneratorRuntime.wrap((function _callee2$(o){while(1)switch(o.prev=o.next){case 0:if(t=Object(O["a"])("code"),!t){o.next=12;break}return o.prev=2,o.next=5,Object(y["b"])(t);case 5:e=o.sent,this.setUserInfo(e.data),o.next=12;break;case 9:o.prev=9,o.t0=o["catch"](2),console.log(o.t0);case 12:if(this.user||(a=window.location.href,window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(j["a"],"&redirect_uri=").concat(a,"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")),Object(O["b"])()){o.next=15;break}return o.abrupt("return",this.$toast("请在微信中打开此链接！"));case 15:if(this.radio){o.next=17;break}return o.abrupt("return",this.$toast.fail("请选择作品"));case 17:return this.$toast.loading({message:"正在投票",forbidClick:!0,duration:0}),o.prev=18,o.next=21,Object(y["a"])(this.user.openId);case 21:r=!0,o.next=27;break;case 24:o.prev=24,o.t1=o["catch"](18),r=!1;case 27:if(r){o.next=30;break}return this.$toast("请先关注景德镇市文化馆微信公众号"),o.abrupt("return",!1);case 30:return o.prev=30,i=Number(this.$route.params.id),this.loading=!0,o.next=35,Object(f["a"])(i,this.radio,this.user.openid);case 35:n=o.sent,this.$toast.success(n.message),s=0;case 38:if(!(s<this.workList.length)){o.next=45;break}if(this.workList[s].id!==this.radio){o.next=42;break}return this.workList[s].count++,o.abrupt("break",45);case 42:s++,o.next=38;break;case 45:this.$toast.fail(n.msg||"投票成功"),o.next=52;break;case 48:o.prev=48,o.t2=o["catch"](30),console.log(o.t2),this.$toast.fail(o.t2.data.msg||"投票失败");case 52:return o.prev=52,this.loading=!1,o.finish(52);case 55:case"end":return o.stop()}}),_callee2,this,[[2,9],[18,24],[30,48,52,55]])})));function handleClickVote(){return t.apply(this,arguments)}return handleClickVote}()},{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getData();case 2:case"end":return t.stop()}}),_callee3,this)})));function created(){return t.apply(this,arguments)}return created}()}]),ManagerList}(l["c"]);Object(u["a"])([w.Action("SET_USER_INFO")],_.prototype,"setUserInfo",void 0),Object(u["a"])([Object(g["a"])("user")],_.prototype,"user",void 0),_=Object(u["a"])([Object(l["a"])({components:{Top:d["a"],CustomTitle:h["a"],WorkList:k["a"]}})],_);var L=_,x=L,C=(a("c63d"),a("2877")),I=Object(C["a"])(x,render,r,!1,null,"7452e8f2",null);e["default"]=I.exports},a345:function(t,e,a){"use strict";a.d(e,"a",(function(){return vote}));var r=a("4328"),i=a.n(r),n=a("dbe5"),s="/api/fore/workuser/vote";function vote(t,e,a){return Object(n["a"])({method:"POST",url:s,data:i.a.stringify({activityId:t,workId:e,wxOpenid:a})})}},b833:function(t,e,a){"use strict";var r=a("4e9a"),i=a.n(r);i.a},c63d:function(t,e,a){"use strict";var r=a("3ae1"),i=a.n(r);i.a},d39b:function(t,e,a){"use strict";var render=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"work-list"},[a("ul",{staticStyle:{overflow:"hidden"}},t._l(t.workList,(function(t){return a("li",{key:t.id,staticClass:"list-item"},[a("common-list-item",{attrs:{title:t.name,id:t.id,thumbnail:t.image,author:t.author,count:t.votes,type:t.activityType}})],1)})),0)])},r=[],i=a("d4ec"),n=a("262e"),s=a("2caf"),o=a("9ab4"),c=a("60a3"),listItemvue_type_template_id_96c1a82c_scoped_true_render=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{attrs:{tag:"div",to:t.path}},[a("div",{staticClass:"thumbnail"},[a("van-image",{attrs:{fit:"cover",width:"100%",height:"100%","lazy-load":"",src:t.baseUrl+t.thumbnail}})],1),a("h3",{staticClass:"title"},[t._v(t._s(t.title))]),a("div",{staticClass:"operator"},[a("span",{staticClass:"author"},[t._v("作者："+t._s(t.author))]),a("div",{staticClass:"flex-center-center count"},[a("van-icon",{attrs:{name:"good-job-o"}}),a("span",[t._v(t._s(t.count||0))])],1)])])},u=[],l=(a("a9e3"),a("bee2")),d=function(t){Object(n["a"])(CommonListItem,t);var e=Object(s["a"])(CommonListItem);function CommonListItem(){var t;return Object(i["a"])(this,CommonListItem),t=e.apply(this,arguments),t.baseUrl="",t}return Object(l["a"])(CommonListItem,[{key:"path",get:function get(){return 0===this.type?"/theme-list1/detail/".concat(this.id):"/theme-list2/detail/".concat(this.id)}}]),CommonListItem}(c["c"]);Object(o["a"])([Object(c["b"])({type:Number,required:!0})],d.prototype,"type",void 0),Object(o["a"])([Object(c["b"])({type:Number,required:!0})],d.prototype,"id",void 0),Object(o["a"])([Object(c["b"])({type:String,required:!0})],d.prototype,"thumbnail",void 0),Object(o["a"])([Object(c["b"])({type:String,required:!0})],d.prototype,"title",void 0),Object(o["a"])([Object(c["b"])({type:String,required:!0})],d.prototype,"author",void 0),Object(o["a"])([Object(c["b"])({type:Number,required:!0})],d.prototype,"count",void 0),d=Object(o["a"])([c["a"]],d);var p=d,b=p,h=(a("b833"),a("2877")),f=Object(h["a"])(b,listItemvue_type_template_id_96c1a82c_scoped_true_render,u,!1,null,"96c1a82c",null),v=f.exports,m=function(t){Object(n["a"])(WorkList,t);var e=Object(s["a"])(WorkList);function WorkList(){return Object(i["a"])(this,WorkList),e.apply(this,arguments)}return WorkList}(c["c"]);Object(o["a"])([Object(c["b"])({type:Array,required:!0})],m.prototype,"workList",void 0),m=Object(o["a"])([Object(c["a"])({components:{CommonListItem:v}})],m);var g=m,k=g,O=(a("502c"),Object(h["a"])(k,render,r,!1,null,"7787771d",null));e["a"]=O.exports}}]);