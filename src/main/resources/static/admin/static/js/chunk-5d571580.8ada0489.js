(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d571580"],{"15fd":function(e,t,r){"use strict";function a(e,t){if(null==e)return{};var r,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(i[r]=e[r]);return i}function i(e,t){if(null==e)return{};var r,i,n=a(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}r.d(t,"a",(function(){return i}))},"24a3":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"active-edit-page"},[r("el-page-header",{staticStyle:{padding:"10px 20px 20px"},attrs:{content:"default"===e.$route.params.activeId?"新增活动":"修改活动"},on:{back:function(t){return e.$router.go(-1)}}}),e._v(" "),e.loading?e._e():r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"110px","label-position":"right"}},[r("el-form-item",{staticStyle:{display:"none"},attrs:{prop:"id"}},[r("el-input",{attrs:{size:"small"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"活动名称",prop:"name"}},[r("el-input",{attrs:{size:"small",placeholder:"投票活动名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"活动封面",prop:"image"}},[r("upload-image",{attrs:{"file-list":e.fileList},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}}),e._v(" "),r("el-input",{staticStyle:{display:"none"},attrs:{size:"small"},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"投票类型",prop:"type"}},[[r("el-radio",{attrs:{label:0},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v("用户活动")]),e._v(" "),r("el-radio",{attrs:{label:1},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v("本馆活动")])]],2),e._v(" "),r("el-form-item",{attrs:{label:"参赛方式",prop:"address"}},[r("el-input",{attrs:{type:"textarea",maxlength:"300","show-word-limit":"",placeholder:"参赛方式"},model:{value:e.form.entryMethod,callback:function(t){e.$set(e.form,"entryMethod",t)},expression:"form.entryMethod"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"参赛对象",prop:"participants"}},[r("el-input",{attrs:{type:"textarea",maxlength:"300","show-word-limit":"",placeholder:"参赛对象"},model:{value:e.form.participants,callback:function(t){e.$set(e.form,"participants",t)},expression:"form.participants"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"截止时间",prop:"activityTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"活动时间",size:"small","value-format":"yyyy-MM-dd HH:mm:ss","default-value":e.form.activityTime},model:{value:e.form.activityTime,callback:function(t){e.$set(e.form,"activityTime",t)},expression:"form.activityTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"活动详情",prop:"content"}},[r("tinymce",{ref:"edit",attrs:{text:e.form.content}}),e._v(" "),r("el-input",{staticStyle:{display:"none"},attrs:{type:"textarea"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)},i=[],n=r("15fd"),o=(r("7f7f"),r("96cf"),r("1da1")),l=r("6244"),s=r("fa7d"),c={name:"ActiveEdit",components:{Tinymce:function(){return Promise.all([r.e("chunk-322af662"),r.e("chunk-2d0b15b6")]).then(r.bind(null,"2002"))},UploadImage:function(){return r.e("chunk-7466f0f8").then(r.bind(null,"30c9"))}},data:function(){var e=function(e,t,r){var a=/((([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))-02-29))\s([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/;return a.test(t)?r():r(new Error("请填写时间格式"))};return{form:{id:"",name:"",image:"",type:1,entryMethod:"",participants:"",activityTime:"",content:""},rules:{id:[],name:[{required:!0,message:"请填写活动名称"}],image:[{required:!0,message:"请上传封面"}],type:[{required:!0,message:"请选择活动类型"}],entryMethod:[],participants:[],activityTime:[{required:!0,message:"请选择活动截止时间"},{validator:e}],content:""},imageUploadUrl:"/api/upload/uploadImage",fileList:[],loading:!0}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n,o,c,m,u,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.params.activeId,"default"!==t){e.next=5;break}this.loading=!1,e.next=27;break;case 5:return e.prev=5,e.next=8,Object(l["d"])(t);case 8:r=e.sent,a=r.data,i=a.id,n=a.name,o=a.image,c=a.entryMethod,m=a.participants,u=a.activityTime,f=a.content,p=a.type,this.form.id=i,this.form.name=n,this.form.image=o,this.form.entryMethod=c,this.form.participants=m,this.form.activityTime=Object(s["b"])(u),this.form.content=f,this.form.type=p,o&&(this.fileList=[{name:"封面",url:""+o}]),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](5),console.log(e.t0);case 24:return e.prev=24,this.loading=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[5,21,24,27]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,i,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:return e.form.id?(a=l["f"],i=Object.assign(e.form,{})):(a=l["a"],o=e.form,o.id,s=Object(n["a"])(o,["id"]),i=s),i.content=e.$refs.edit.getContent(),e._globalLoading(),t.next=7,a(i);case 7:c=t.sent,e.$message.success(c.msg||"成功"),e.$router.go(-1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},m=c,u=r("2877"),f=Object(u["a"])(m,a,i,!1,null,null,null);t["default"]=f.exports},6244:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"f",(function(){return p})),r.d(t,"b",(function(){return d})),r.d(t,"e",(function(){return b})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return y}));var a=r("b775"),i=r("4328"),n=r.n(i),o="/api/back/activity/add",l="/api/back/activity/update",s="/api/back/activity/listByPage",c="/api/back/activity/status",m="/api/back/activity/deleteById",u="/api/back/activity/selectById";function f(e){return Object(a["a"])({url:o,method:"POST",data:n.a.stringify(e)})}function p(e){return Object(a["a"])({url:l,method:"POST",data:n.a.stringify(e)})}function d(e){return Object(a["a"])({url:m,method:"GET",params:{id:e}})}function b(e){return Object(a["a"])({url:c,method:"GET",params:{id:e}})}function v(e,t){return Object(a["a"])({url:s,method:"GET",params:{pageSize:e,pageNumber:t}})}function y(e){return Object(a["a"])({url:u,method:"GET",params:{id:e}})}}}]);