(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc3a0052"],{8388:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"active-list-local-page"},[n("el-page-header",{staticStyle:{padding:"10px 20px 20px"},attrs:{content:"作品列表"},on:{back:function(e){return t.$router.go(-1)}}}),t._v(" "),n("div",{staticClass:"page-container"},[n("div",[t._v("\n      选择类型:\n      "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectType1,callback:function(e){t.selectType1=e},expression:"selectType1"}},t._l(t.selectType1Option,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v("\n       \n      选择组别:\n      "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectType2,callback:function(e){t.selectType2=e},expression:"selectType2"}},t._l(t.selectType2Option,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),n("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:t.handleClickSearch}},[t._v("搜索")])],1),t._v(" "),n("div",{staticClass:"operation-top",staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){return t.$router.push("/active/work/edit/"+t.$route.params.activeId+"/default")}}},[t._v("新增")])],1),t._v(" "),n("c-table",{ref:"table",attrs:{customData:[t.$route.params.activeId,t.selectType1,t.selectType2],handler:t.getData},on:{handlerlist:t.handlerList}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList,border:""}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"作品名称"}}),t._v(" "),n("el-table-column",{attrs:{label:"封面",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.image?n("el-image",{attrs:{src:t.baseUrl+a.image,fit:"contain"}}):n("span",[t._v("暂无活动封面")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"author",label:"作者"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-tag",{attrs:{type:1===a.status?"danger":"success"}},[t._v(t._s(1===a.status?"下架":"上架"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"票数"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.votes||0)+"（票）")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(t._f("datetimeFormat")(a.createTime)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-shop"},on:{click:function(e){return t.handleClickStatus(a.id)}}},[t._v("上/下架")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickShowDetail(a.id)}}},[t._v("查看")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.handleClickDelete(a.id)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"作品详情",visible:t.dialogVisible,width:"415px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticStyle:{"min-height":"300px"}},[n("h1",{staticClass:"title"},[t._v(t._s(t.info.name))]),t._v(" "),n("div",{staticClass:"info"},[n("span",[t._v("作者："+t._s(t.info.author))]),t._v(" "),n("span",[n("i",{staticClass:"el-icon-thumb",staticStyle:{"margin-right":"6px"}}),t._v(t._s(t.info.votes))])]),t._v(" "),n("div",{staticClass:"video"},[t.info.video?n("video",{attrs:{src:t.info.video,width:"100%",autoplay:"",controls:""}}):t._e()]),t._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.info.content)}})])])],1)},i=[],r=(n("7f7f"),n("96cf"),n("1da1")),c=n("9b41"),s=n("b705"),o={name:"ActiveListUser",components:{CTable:function(){return n.e("chunk-ceebb038").then(n.bind(null,"0e36"))}},data:function(){return{dataList:[],baseUrl:"",dialogVisible:!1,info:{name:"",content:"",video:"",author:"",votes:0},selectType1:"",selectType2:"",selectType1Option:[],selectType2Option:[]}},created:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])(100,1);case 2:e=t.sent,this.selectType1Option=[{id:"",name:"全部"}].concat(e.rows.filter((function(t){return 1===t.type}))),this.selectType2Option=[{id:"",name:"全部"}].concat(e.rows.filter((function(t){return 2===t.type})));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getData:function(){return c["d"]},handlerList:function(t){this.dataList=t},handleClickSearch:function(){this.$refs.table.reset()},handleClickDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this._globalLoading("正在进行删除操作"),t.next=3,Object(c["b"])(e);case 3:n=t.sent,this.$message.success(n.msg||"删除成功"),this.$refs.table.getData();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleClickStatus:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this._globalLoading("正在切换上下架状态"),t.next=3,Object(c["e"])(e);case 3:n=t.sent,this.$message.success(n.msg||"更新状态成功"),this.$refs.table.getData();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleClickShowDetail:function(t){var e=this,n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});Object(c["c"])(t).then((function(t){n.close();var a=t.data,i=a.name,r=a.content,c=a.video,s=a.author,o=a.votes;e.info.name=i,e.info.content=r,e.info.video=c,e.info.author=s,e.info.votes=o,e.dialogVisible=!0}))}}},l=o,u=(n("d818"),n("2877")),d=Object(u["a"])(l,a,i,!1,null,"132b607f",null);e["default"]=d.exports},"9b41":function(t,e,n){"use strict";n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return f})),n.d(e,"f",(function(){return b})),n.d(e,"b",(function(){return v})),n.d(e,"e",(function(){return h})),n.d(e,"c",(function(){return m}));var a=n("b775"),i=n("4328"),r=n.n(i),c="/api/back/work/listByPage",s="/api/back/work/add",o="/api/back/work/update",l="/api/back/work/deleteById",u="/api/back/work/status",d="/api/back/work/selectById";function p(t,e,n,i,r){return Object(a["a"])({url:c,method:"GET",params:{pageSize:t,pageNumber:e,activityId:n,selectType1:i,selectType2:r}})}function f(t){return Object(a["a"])({url:s,method:"POST",data:r.a.stringify(t)})}function b(t){return Object(a["a"])({url:o,method:"POST",data:r.a.stringify(t)})}function v(t){return Object(a["a"])({url:l,method:"GET",params:{id:t}})}function h(t){return Object(a["a"])({url:u,method:"GET",params:{id:t}})}function m(t){return Object(a["a"])({url:d,method:"GET",params:{id:t}})}},b705:function(t,e,n){"use strict";n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return b})),n.d(e,"e",(function(){return v}));var a=n("b775"),i=n("4328"),r=n.n(i),c="/api/back/dict/listByPage",s="/api/back/dict/add",o="/api/back/dict/deleteById",l="/api/back/dict/update",u="/api/back/dict/selectById";function d(t,e){return Object(a["a"])({url:c,method:"GET",params:{pageSize:t,pageNumber:e}})}function p(t){return Object(a["a"])({url:s,method:"POST",data:r.a.stringify(t)})}function f(t){return Object(a["a"])({url:o,method:"GET",params:{id:t}})}function b(t){return Object(a["a"])({url:l,method:"POST",data:r.a.stringify(t)})}function v(t){return Object(a["a"])({url:u,method:"GET",params:{id:t}})}},c795:function(t,e,n){},d818:function(t,e,n){"use strict";var a=n("c795"),i=n.n(a);i.a}}]);